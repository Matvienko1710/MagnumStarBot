const { inlineKeyboard } = require('../keyboards/inline');

module.exports = (bot) => {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /info
  bot.command('info', async (ctx) => {
    await ctx.reply(
      '‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ:\n\n' +
      'Magnum Star Bot - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞ Stars –∏ Magnum Coins.\n\n' +
      'üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:\n' +
      '‚Ä¢ üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n' +
      '‚Ä¢ üåê WebApp (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)\n\n' +
      '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:',
      inlineKeyboard()
    );
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /menu
  bot.command('menu', async (ctx) => {
    await ctx.reply('–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', inlineKeyboard());
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  bot.on('text', async (ctx) => {
    const text = ctx.message.text.toLowerCase();
    
    switch (text) {
      case '–º–µ–Ω—é':
      case 'menu':
      case '–∫–Ω–æ–ø–∫–∏':
      case 'buttons':
        await ctx.reply('–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:', inlineKeyboard());
        break;
        
      case '–ø—Ä–æ—Ñ–∏–ª—å':
      case 'profile':
        const user = ctx.from;
        const userName = user.first_name || '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
        const userId = user.id;
        const userStars = 0; // –ü–æ–∫–∞ —Å—Ç–∞–≤–∏–º 0, –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ë–î
        const userCoins = 0; // –ü–æ–∫–∞ —Å—Ç–∞–≤–∏–º 0, –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ë–î
        const referrals = 0; // –ü–æ–∫–∞ —Å—Ç–∞–≤–∏–º 0, –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ë–î
        const earnedFromRefs = 0; // –ü–æ–∫–∞ —Å—Ç–∞–≤–∏–º 0, –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ë–î
        
        const profileMessage = `üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

üë§ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
‚îú ID: ${userId}
‚îú –ò–º—è: ${userName}
‚îú Username: ${user.username || '–ù–µ —É–∫–∞–∑–∞–Ω'}
‚îî –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${new Date().toLocaleDateString('ru-RU')}

üíé –ë–∞–ª–∞–Ω—Å
‚îú ‚≠ê Stars: ${userStars}
‚îî ü™ô Magnum Coins: ${userCoins}

üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îú –†–µ—Ñ–µ—Ä–∞–ª—ã: ${referrals}
‚îú –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ${earnedFromRefs} Stars
‚îî –£—Ä–æ–≤–µ–Ω—å: –ù–æ–≤–∏—á–æ–∫

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îú –ó–∞–¥–∞–Ω–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: 0
‚îú –í—Ä–µ–º—è –≤ –±–æ—Ç–µ: 0 –º–∏–Ω
‚îî –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥: –°–µ–≥–æ–¥–Ω—è

üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
‚îú üèÜ –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏ (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è)
‚îî üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤—Ö–æ–¥ (0/7 –¥–Ω–µ–π)`;
        
        await ctx.reply(profileMessage, inlineKeyboard());
        break;
        
      case '–≤–µ–±':
      case 'webapp':
      case 'web':
        await ctx.reply(
          'üåê WebApp - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:\n\n' +
          'üì± –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å\n' +
          'üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n' +
          'üéÆ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è\n' +
          'üí¨ –ß–∞—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π\n\n' +
          '–û—Ç–∫—Ä—ã–≤–∞–µ–º WebApp...',
          inlineKeyboard()
        );
        break;
        
      default:
        await ctx.reply(
          '–ù–µ –ø–æ–Ω–∏–º–∞—é –∫–æ–º–∞–Ω–¥—É. –ù–∞–ø–∏—à–∏—Ç–µ "–º–µ–Ω—é" –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–æ–∫ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /info',
          inlineKeyboard()
        );
    }
  });
};