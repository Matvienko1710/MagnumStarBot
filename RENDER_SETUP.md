# Настройка переменных окружения на Render

## Обязательные переменные для Render

В панели Render в разделе Environment Variables добавьте следующие переменные:

### 1. BOT_TOKEN
- **Название:** `BOT_TOKEN`
- **Значение:** Ваш токен Telegram бота
- **Описание:** Токен для аутентификации бота в Telegram API

### 2. MONGODB_URI  
- **Название:** `MONGODB_URI`
- **Значение:** Строка подключения к MongoDB Atlas
- **Описание:** URL для подключения к базе данных

### 3. CHANNEL_USERNAME (НОВАЯ ПЕРЕМЕННАЯ)
- **Название:** `CHANNEL_USERNAME`
- **Значение:** `@magnumtap`
- **Описание:** Username канала для обязательной подписки (с @)

### 4. NODE_ENV
- **Название:** `NODE_ENV`
- **Значение:** `production`
- **Описание:** Режим работы приложения

## Исправления в коде

✅ **Исправлено:** Проверка подписки через Telegram API
✅ **Исправлено:** Убрана кнопка "Попробовать снова"
✅ **Добавлено:** Использование переменных окружения для канала
✅ **Улучшено:** Логирование процесса проверки подписки

## Важные моменты

1. **Права бота в канале**: Убедитесь, что бот добавлен в канал @magnumtap как администратор
2. **Права администратора**: Боту нужны права для чтения списка участников
3. **Переменная CHANNEL_USERNAME**: Обязательно добавьте эту новую переменную на Render

## Как добавить переменную на Render

1. Зайдите в свой проект на Render
2. Перейдите в раздел "Environment"
3. Нажмите "Add Environment Variable"
4. Введите название: `CHANNEL_USERNAME`
5. Введите значение: `@magnumtap`
6. Нажмите "Save Changes"
7. Перезапустите сервис

После добавления переменной проверка подписки будет работать корректно!
